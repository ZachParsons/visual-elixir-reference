\matrix [fptk, list=a] {
    \elemx{1}{\texttt{\small{start}}} &
    \elem{2} &
    \elem{3} &
    \elems &
    \elem{i} &
    \elemsafter \\
};

\foreach \i in {2, 3, i}{
    \draw [fptk, <- flow] (a\i.north) -- +(0, .5)
        node (fun\i) [fptk, fun, above];
}

\coordinate (top rule) at ($ (a2.north) + (0, 1.5) $);
\coordinate (bottom rule) at ($ (a2.north)!.5!(fun2.south io) $);

\draw [fptk, subflow ->, flow shape -|-|={a2.east}{top rule}] (fun2.south io |- bottom rule) -- (fun3.north io);
\draw [fptk, subflow ->, flow shape -|..|={a3.east}{top rule}] (fun3.south io |- bottom rule) -- (funi.north io);
\draw [fptk, subflow ->, flow shape -|..={ai.east}{top rule}] (funi.south io |- bottom rule) -- ($ (\currcoord |- top rule) + (1, 0) $);

\draw [fptk, <- flow] (a1.north) -- +(0, 2)
    node (start) [above] {\texttt{start}};

\draw [fptk, subflow ->, flow shape |-|={top rule}] (start.south) -- (fun2.north io);
