\def\cnt{\texttt{\small{c}}}

\matrix [fptk, list=a] {
    \elem{1} &
    \elems[1] &
    \elemx{c}{$a_{\cnt}$}; &
    \elemx{c+1}{$a_{\cnt+1}$}; &
    \elems[1] &
    \elemx{2c}{$a_{2\cnt}$}; &
    \elems &
    \elemx{ic+1}{$a_{i\cnt+1}$}; &
    \elems[1] &
    \elemx{i+1c}{$a_{(i\!+\!1)\cnt}$}; &
    \elemsafter \\
};

\measuretop{a1.north west}{ac.north east}{\texttt{count}}
\measuretop{ac+1.north west}{a2c.north east}{\texttt{count}}
\measuretop{aic+1.north west}{ai+1c.north east}{\texttt{count}}

\matrix [fptk, listx={b}{1.25}, below=2 of a]{
    \placeholder[1]{3.25} &
    \placeholder[2]{3.25} &
    \elems &
    \placeholder[i]{3.25} &
    \elemsafter \\
};

\matrix at (b1) [fptk, list=c] {
    \elem{1} &
    \elems[.75] &
    \elemx{c}{$a_{\cnt}$}; \\
};

\matrix at (b2) [fptk, list=c] {
    \elemx{c+1}{$a_{\cnt+1}$}; &
    \elems[.75] &
    \elemx{2c}{$a_{2\cnt}$}; \\
};

\matrix at (bi) [fptk, list=c] {
    \elemx{ic+1}{$a_{i\cnt+1}$}; &
    \elems[.75] &
    \elemx{ic+1}{$a_{(i\!+\!1)\cnt}$}; \\
};

\bracetobrace
    {ac.south east}{a1.south west}
    {b1.north west}{b1.north east}
\bracetobrace
    {a2c.south east}{ac+1.south west}
    {b2.north west}{b2.north east}
\bracetobrace
    {ai+1c.south east}{aic+1.south west}
    {bi.north west}{bi.north east}
