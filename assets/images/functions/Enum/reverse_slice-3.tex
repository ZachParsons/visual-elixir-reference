\newcommand{\str}{\texttt{\small{s}}}
\newcommand{\cnt}{\texttt{\small{c}}}

\matrix [fptk, list=a] {
    \elem{0} &
    \elem{1} &
    \elems &
    \elemx{i}{$a_\str$} &
    \elems[1] &
    \elemx{i+c-1}{$a_{\str\!+\!\cnt\!-\!1}$} &
    \elems &
    \elem{n-1} \\
};

\draw [fptk, <- subflow, shorten >=1ex] (ai.north west) -- +(0, 1)
    node [anchor=base] {\texttt{start}};
\draw [fptk/measure, fptk/measure/label=\texttt{count}] (ai.north west) -- (ai+c-1.north east);

\matrix [fptk, list=b, element=a, below=2 of a] {
    \elem{0} &
    \elem{1} &
    \elems &
    \elemx{i+c-1}{$a_{\str\!+\!\cnt\!-\!1}$} &
    \elems[1] &
    \elemx{i}{$a_{\str}$} &
    \elems &
    \elem{n-1} \\
};

\bracetobrace
    {ai.south west}{a0.south west}
    {b0.north west}{bi+c-1.north west}

\bracetobrace
    {an-1.south east}{ai+c-1.south east}
    {bi.north east}{bn-1.north east}

\draw [fptk, flow ->] [dashed, shorten >=1ex, out=290, in=110] (ai.south west) to (bi.north east);
\draw [fptk, flow ->] [dashed, shorten >=1ex, out=250, in=70] (ai+c-1.south east) to (bi+c-1.north west);
