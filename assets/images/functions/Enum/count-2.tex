\matrix [fptk, list=a] {
    \elem{1} &
    \elem{2} &
    \elems &
    \elem{i} &
    \elem{i+1}; &
    \elems &
    \elem{n-1}; &
    \elem{n} \\
};

\foreach \i/\r in {
    1/\false,
    2/\true,
    i/\true,
    i+1/\nil,
    n-1/\true,
    n/\false
}{
    \applyfuntop{a\i.north}{\r};
}

\node (b) [below=2 of a] {$\displaystyle \sum_{i=1}^n 1|\texttt{fun}(a_i)$};

\foreach \i in {2,i,n-1}{
    \draw [fptk, flow ->=soft] (a\i.south) --
        node [sloped, above=.5ex] {$+1$} (b.north);
}
